---
layout: default
title: Linux运行信息保存与syslog
category: Linux
---
随着对Linux系统的深入使用，经常碰到一些操作出错的情况，Linux一般会将不同的错误信
息记录到`/var/log/`目录下面的不同文件中去，有必要对这些文档所记录的内容和负责信
息记录的syslog程序进行了解

#日志文件种类
+ cron: 记录成crontab相关的信息
+ dmesg: 系统开机时产生的各种信息(fedora18下没有)
+ lastlog: 所有帐号最近登录系统时信息
+ maillog或mail\/\*：sendMail与dovecot产生信息
+ **messages**：系统错误信息，重要信息记录处
+ secure: 需要输入密码程序产生信息，如su，sudo，ssh等
+ wtmp, faillog：登录系统者的账户信息，后者是错误登录时的信息
+ httpd\/\*, news\/\*, samba\/\*: 不同网络服务记录的信息

#产生方式
1. 应用程序自己生成：apache等
2. 统一的Linux信息记录服务--syslogd(需将信息传给该服务才能记录)
3. 记录系统核心信息的服务--klogd
4. logrotate自动化处理所有日志信息


#syslog
##syslog记录的日志格式
一般都会具有1.发生日期与时间，2.发生主机名称，3.启动此事件的服务（如samba，xinetd等）
或者是函数名（如libpam），4.实际日志内容

##配置syslogd rsyslog.conf
`/etc/rsyslog.conf`是syslogd的配置文档，设定（1）什么服务的(可以man 3 syslog查看)
（2）什么等级的信息(info,notice,warn,error,crit,alert,emerg\/panic)
（3）被记录在那个文件。语法为：

    server-name [.=!] message-level
    mail.info /var/log/maillog_info #mail服务大于等于info级别的信息记录到/var/log/maillog_info文档中去

##rsyslog与syslog的比较
在我的fedora中，并没有找到鸟哥文中说的syslog.conf文件，而是rsyslog.conf，原来
这些发行版（包括centos6.2）已经用rsyslog代替了系统自带的syslog。
选择rsyslog主要原因有：1.支持Mysql，PostgresSQL，Oracle等。2.支持多个rsyslog进程
监听不同端口。3.兼容syslog.conf配置文件。4.支持消息转发。5.配置文件可写简单逻辑。
6.有现成的前端Web展示程序[参看该文](http://www.gaizaoren.org/archives/408)


