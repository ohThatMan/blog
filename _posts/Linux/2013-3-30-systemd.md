---
layout: default
title: 新的系统和服务管理软件--systemd
category: Linux
---

#简介
systemd 是 Linux 下的一款系统和服务管理器，兼容 SysV 和 LSB 的启动脚本。systemd 的特性有：

+ 支持并行化任务；
+ 同时采用 socket 式与 D-Bus 总线式激活服务；按需启动守护进程（daemon）；
+ 利用 Linux 的 cgroups 监视进程；
+ 支持快照和系统恢复；
+ 维护挂载点和自动挂载点；
+ 各服务间基于依赖关系进行精密控制。

systemd可以替换service(启动服务)和chkconfig(开机自动运行服务) [查看详情][00]
[00]:http://fedoraproject.org/wiki/SysVinit_to_Systemd_Cheatsheet/zh
##service
`start``stop``restart``reload`(重载配置)`condrestart`(如果在运行则重启)`
status`(查看运行状态)

##chkconfig
+ `chkconfig xxx on`(设定启动运行)` -> `systemctl enable xxx.service`
+ `off`
+ `chkconfig xxx`(直接chkconfig查看当前设置)
+ `chkconfig --list`(输出在个运行级别下服务的启动和禁用情况)

#工作流程
1. 系统启动时，systemd默认激活default.target(按照依赖关系激活服务和调用其他unit)

#常用指令
+ `systemd-cgls`：树形查看Linux控制组结构层次
+ `systemctl`:列出正在运行的服务和其他
+ `system is-enable xxx.service`:查看某一服务是否开机自启动
+ `system isolate runlevelN,target`:**切换**到第N运行级
+ 改变默认运行级别：1)`rm /etc/systemd/system/default.target`
  2)`ln -s /lib/systemd/system/multi-user.target /etc/systemd/system/default.target`
+ `systemctl list-units --type service`列出所有loaded & active的unit，--all查看loaded的unit
+ `systemctl list-unit-files --type service`列出所有安装的service类型的unit files列表

#.service .target等配置文件的位置
`/usr/lib/systemd/system/*`  
配置的实质是将配置文件软链接到`/etc/systemd/system/`下面

#实例
##mysql开机自启动
`sudo systemctl enabele mysqld`  
>>>ln -s '/usr/lib/systemd/system/mysqld.service' '/etc/systemd/system/multi-user.target.wants/mysqld.service'