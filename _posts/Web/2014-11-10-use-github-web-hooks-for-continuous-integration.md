---
layout: default
title: 使用 github 的 webhooks 来实现持续集成
category: Web
tags: 
---

## Links
+ [How To Use Git Hooks To Automate Development and Deployment Tasks](How To Use Git Hooks To Automate Development and Deployment Tasks)

配置的 POST 如果使用了 `applicaiton/json` 的 Content Type, 则在 express 中仅需读取 req.body 对象即可

```
{ ref: 'refs/heads/master',
  before: 'a8121f1e5bdc46accff045d06448335b43d4475a',
  after: 'c385358f429cdb06fb7ffaddf3264f31ce836324',
  created: false,
  deleted: false,
  forced: false,
  base_ref: null,
  compare: 'https://github.com/wangyuzju/labs/compare/a8121f1e5bdc...c385358f429c',
  commits: 
   [ { id: 'c385358f429cdb06fb7ffaddf3264f31ce836324',
       distinct: true,
       message: 'test github hooks',
       timestamp: '2014-11-10T16:36:41+08:00',
       url: 'https://github.com/wangyuzju/labs/commit/c385358f429cdb06fb7ffaddf3264f31ce836324',
       author: [Object],
       committer: [Object],
       added: [],
       removed: [],
       modified: [Object] } ],
  head_commit: 
   { id: 'c385358f429cdb06fb7ffaddf3264f31ce836324',
     distinct: true,
     message: 'test github hooks',
     timestamp: '2014-11-10T16:36:41+08:00',
     url: 'https://github.com/wangyuzju/labs/commit/c385358f429cdb06fb7ffaddf3264f31ce836324',
     author: 
      { name: 'wangyuzju',
        email: 'wangyu0248@gmail.com',
        username: 'wangyuzju' },
     committer: 
      { name: 'wangyuzju',
        email: 'wangyu0248@gmail.com',
        username: 'wangyuzju' },
     added: [],
     removed: [],
     modified: [ 'labs/routes/index.js' ] },
  repository: 
   { id: 26399364,
     name: 'labs',
     full_name: 'wangyuzju/labs',
     owner: { name: 'wangyuzju', email: 'wangyu0248@gmail.com' },
     private: false,
     html_url: 'https://github.com/wangyuzju/labs',
     description: 'the source code of labs.hellofe.com',
     fork: false,
     url: 'https://github.com/wangyuzju/labs',
     forks_url: 'https://api.github.com/repos/wangyuzju/labs/forks',
     keys_url: 'https://api.github.com/repos/wangyuzju/labs/keys{/key_id}',
     collaborators_url: 'https://api.github.com/repos/wangyuzju/labs/collaborators{/collaborator}',
     teams_url: 'https://api.github.com/repos/wangyuzju/labs/teams',
     hooks_url: 'https://api.github.com/repos/wangyuzju/labs/hooks',
     issue_events_url: 'https://api.github.com/repos/wangyuzju/labs/issues/events{/number}',
     events_url: 'https://api.github.com/repos/wangyuzju/labs/events',
     assignees_url: 'https://api.github.com/repos/wangyuzju/labs/assignees{/user}',
     branches_url: 'https://api.github.com/repos/wangyuzju/labs/branches{/branch}',
     tags_url: 'https://api.github.com/repos/wangyuzju/labs/tags',
     blobs_url: 'https://api.github.com/repos/wangyuzju/labs/git/blobs{/sha}',
     git_tags_url: 'https://api.github.com/repos/wangyuzju/labs/git/tags{/sha}',
     git_refs_url: 'https://api.github.com/repos/wangyuzju/labs/git/refs{/sha}',
     trees_url: 'https://api.github.com/repos/wangyuzju/labs/git/trees{/sha}',
     statuses_url: 'https://api.github.com/repos/wangyuzju/labs/statuses/{sha}',
     languages_url: 'https://api.github.com/repos/wangyuzju/labs/languages',
     stargazers_url: 'https://api.github.com/repos/wangyuzju/labs/stargazers',
     contributors_url: 'https://api.github.com/repos/wangyuzju/labs/contributors',
     subscribers_url: 'https://api.github.com/repos/wangyuzju/labs/subscribers',
     subscription_url: 'https://api.github.com/repos/wangyuzju/labs/subscription',
     commits_url: 'https://api.github.com/repos/wangyuzju/labs/commits{/sha}',
     git_commits_url: 'https://api.github.com/repos/wangyuzju/labs/git/commits{/sha}',
     comments_url: 'https://api.github.com/repos/wangyuzju/labs/comments{/number}',
     issue_comment_url: 'https://api.github.com/repos/wangyuzju/labs/issues/comments/{number}',
     contents_url: 'https://api.github.com/repos/wangyuzju/labs/contents/{+path}',
     compare_url: 'https://api.github.com/repos/wangyuzju/labs/compare/{base}...{head}',
     merges_url: 'https://api.github.com/repos/wangyuzju/labs/merges',
     archive_url: 'https://api.github.com/repos/wangyuzju/labs/{archive_format}{/ref}',
     downloads_url: 'https://api.github.com/repos/wangyuzju/labs/downloads',
     issues_url: 'https://api.github.com/repos/wangyuzju/labs/issues{/number}',
     pulls_url: 'https://api.github.com/repos/wangyuzju/labs/pulls{/number}',
     milestones_url: 'https://api.github.com/repos/wangyuzju/labs/milestones{/number}',
     notifications_url: 'https://api.github.com/repos/wangyuzju/labs/notifications{?since,all,participating}',
     labels_url: 'https://api.github.com/repos/wangyuzju/labs/labels{/name}',
     releases_url: 'https://api.github.com/repos/wangyuzju/labs/releases{/id}',
     created_at: 1415545804,
     updated_at: '2014-11-10T04:10:18Z',
     pushed_at: 1415608609,
     git_url: 'git://github.com/wangyuzju/labs.git',
     ssh_url: 'git@github.com:wangyuzju/labs.git',
     clone_url: 'https://github.com/wangyuzju/labs.git',
     svn_url: 'https://github.com/wangyuzju/labs',
     homepage: null,
     size: 0,
     stargazers_count: 0,
     watchers_count: 0,
     language: 'JavaScript',
     has_issues: true,
     has_downloads: true,
     has_wiki: true,
     has_pages: false,
     forks_count: 0,
     mirror_url: null,
     open_issues_count: 0,
     forks: 0,
     open_issues: 0,
     watchers: 0,
     default_branch: 'master',
     stargazers: 0,
     master_branch: 'master' },
  pusher: { name: 'wangyuzju', email: 'wangyu0248@gmail.com' },
  sender: 
   { login: 'wangyuzju',
     id: 1708809,
     avatar_url: 'https://avatars.githubusercontent.com/u/1708809?v=3',
     gravatar_id: '',
     url: 'https://api.github.com/users/wangyuzju',
     html_url: 'https://github.com/wangyuzju',
     followers_url: 'https://api.github.com/users/wangyuzju/followers',
     following_url: 'https://api.github.com/users/wangyuzju/following{/other_user}',
     gists_url: 'https://api.github.com/users/wangyuzju/gists{/gist_id}',
     starred_url: 'https://api.github.com/users/wangyuzju/starred{/owner}{/repo}',
     subscriptions_url: 'https://api.github.com/users/wangyuzju/subscriptions',
     organizations_url: 'https://api.github.com/users/wangyuzju/orgs',
     repos_url: 'https://api.github.com/users/wangyuzju/repos',
     events_url: 'https://api.github.com/users/wangyuzju/events{/privacy}',
     received_events_url: 'https://api.github.com/users/wangyuzju/received_events',
     type: 'User',
     site_admin: false } }
```
